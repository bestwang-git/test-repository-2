# Makefile for SIL library top directory
#  
#   very top SIL directory

##################### LIBRARIES ########################
#
# DIRS:  
# This is an ordered list
# Put only the directories that build object files in the list

# make all targets
DIRS = src

ifndef PREFIX
    PREFIX=/usr
endif

SRC_INST=$(DESTDIR)$(PREFIX)/share/yumapro/src/sil-error

#################### PLATFORM DEFINITIONS ############

all: silall

################################ MAKE RULES #################################
#

clean: silclean

superclean: silsuperclean

distclean: silsuperclean

uninstall: silclean
	rm -rf $(SRC_INST)

ifdef DEBIAN
 ifdef DEVELOPER
install: srcinstall
 endif # DEVELOPER

 ifdef EVAL
install: libinstall srcinstall
 endif # EVAL

 ifdef SERVER
install: libinstall srcinstall
 endif # SERVER

 ifdef BUILD_ALL
install: libinstall srcinstall
 endif # BUILD_ALL

else # not DEBIAN
install: libinstall srcinstall
endif  # DEBIAN

bindir:
	mkdir -p bin lib

silall: bindir
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) && cd ..;\
        done

silclean: bindir
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) clean && cd ..;\
        done

silsuperclean: bindir
	for dir in $(DIRS); do\
	  cd $$dir && $(MAKE) superclean && cd ..;\
        done

libinstall: bindir
	for dir in $(DIRS); do\
          cd $$dir && $(MAKE) install && cd ..;\
        done

srcinstall:
	mkdir -p $(SRC_INST)
	mkdir -p $(SRC_INST)/src
	mkdir -p $(SRC_INST)/lib
	mkdir -p $(SRC_INST)/bin
	cp Makefile $(SRC_INST)
	cp src/*c $(SRC_INST)/src/
	cp src/*h $(SRC_INST)/src/
	cp src/Makefile $(SRC_INST)/src/

.PHONY: all clean superclean distclean install bindir \
	silall silclean silsuperclean srcinstall libinstall

# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:



